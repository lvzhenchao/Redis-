

1: 为什么做持久化
	数据都存在内存中，redis重启之后；数据会丢失

2: 方案有哪些
	RDB持久化: 将内存数据库快照保存到dump.rdb二进制文件中（可自动，可手动）
	AOF持久化：append only file

3: RDB和AOF的区别
	RDB: 指定的时间间隔内，将内存中的数据集快照写入到磁盘中；实际是fork一个子进程，先将数据集写入临时文件，写入成功后，再替换之前的文件；并用二进制压缩处理
	AOF: 已日志形式记录服务器每次删、写操作；以文本方式记录，可以将文件打开并查看详细操作记录

4: RDB和AOF的优缺点
	RDB:
		优势: 
			容易恢复、性能最大化、启用效率高 
		劣势：
			时间间隔期内，发生问题宕机；容易丢失部分数据
			fork子进程协助，数据集较大时，可能会导致整个服务停止服务几百毫秒等（高可用不是很好）
	AOF:
		优势:
			更高的数据安全性持久性
			同步方式三种同步机制：
							每秒钟同步：异步可能会丢失一秒钟的数据
							每修改同步：效率低
							不同步
			日志采用append模式，如果宕机不会影响之前的数据
			日志过大，redis可以自动采用重写机制
			日志格式清晰
		劣势：
			AOF持久化的文件大于RDB的文件，回复大数据集慢一些
			同步策略慢一些

5: RDB和AOF的配置
	RDB: 
		配置文件：/etc/redis.conf 搜索save 默认开启一下三种
			save 900 1   //900秒之后，至少有1个key发生变化，则dump内存快照
			save 300 10  //300秒之后，至少有10个key发生变化，则dumo内存快照
			save 60 1000 //60秒之后，至少有10000个key发生变化，则dump内存快照

			dbfilename  dumo.rdb //快照存储文件名称
			dir ./  //存储文件夹

	AOF:
		配置文件搜索：
			appendonly yes //改为yes
			同步策略：
				appendfsync always
				appendfsync enerysec
				appendfsync no




注：
	补充：
		redis启动时如果既有rdb文件又有aof文件则优先选择aof文件恢复数据，因为aof文件一般来说数据更安全一点










































